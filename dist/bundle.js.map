{"version":3,"sources":["webpack:///bundle.js","webpack:///webpack/bootstrap 0b511aedac7201c7e491","webpack:///./src/scripts/config.js","webpack:///./src/scripts/index.js","webpack:///./src/scripts/multi_bars.js","webpack:///./src/scripts/multi_maps-add_events.js","webpack:///./src/scripts/multi_maps-render_bars.js","webpack:///./src/scripts/multi_maps.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","COLORS","SUBJECTS","math","german","english_listen","english_read","_interopRequireDefault","obj","__esModule","default","_multi_maps","_multi_maps2","_multi_bars","_multi_bars2","Object","defineProperty","value","_config","dataUrl","cssNamespace","wrapperEl","d3","select","csv","data","forms","columns","keys","map","s","splice","getData","form","_data","filter","d","schulform","find","fach","getChartData","k","indexOf","sort","reverse","y","x","append","attr","selectAll","enter","classed","text","html","chart_id","playbooks","horizontalBarChart","elementId","color","barMargin","margin","top","right","bottom","left","showXAxis","showYAxis","getXDomain","responsiveSvg","render","_multi_mapsRender_bars","_multi_mapsRender_bars2","Control","riot","observable","on","EVT","mouseover","_ref","sender","maps","STORE","slug","hilight","RS","master","control","trigger","updateInfobox","updateSelector","_ref2","activeMap","selectorSelect","setTimeout","element","filterKey","i","n","remove","width","height","showYLabel","drawExtra","band","yScale","bandwidth","g","xScale","_multi_mapsAdd_events","_multi_mapsAdd_events2","geoDataUrl","wrapperId","yExtent","valueColSuffix","json","geoData","topojson","feature","objects","rvr_districts","choroplethMap","defaults","nullColor","getId","f","properties","wrapper","yCol","infobox","template","legend","wrapperTemplate","itemTemplate","selector","getLabel","GEN"],"mappings":"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","file":"bundle.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(2);\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tmodule.exports = {\n\t\n\t  COLORS: ['#f9c280', '#dfad71', '#c59962', '#ab8454', '#917045', '#775b36', '#5e4728'],\n\t\n\t  SUBJECTS: {\n\t    math: 'Mathe',\n\t    german: 'Deutsch',\n\t    english_listen: 'Englisch (Hören)',\n\t    english_read: 'Englisch (Lesen)'\n\t  }\n\t\n\t};\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _multi_maps = __webpack_require__(6);\n\t\n\tvar _multi_maps2 = _interopRequireDefault(_multi_maps);\n\t\n\tvar _multi_bars = __webpack_require__(3);\n\t\n\tvar _multi_bars2 = _interopRequireDefault(_multi_bars);\n\t\n\t__webpack_require__(7);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tif (false) {\n\t  module.hot.accept();\n\t}\n\t\n\t// import 'babel-polyfill'\n\t\n\t\n\t(0, _multi_maps2.default)();\n\t(0, _multi_bars2.default)();\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _config = __webpack_require__(1);\n\t\n\texports.default = function () {\n\t\n\t  // config\n\t  var dataUrl = './data/schulformen.csv';\n\t  var cssNamespace = 'multi-bars';\n\t  var wrapperEl = d3.select('#' + cssNamespace);\n\t\n\t  d3.csv(dataUrl, function (data) {\n\t\n\t    var forms = ['Gymnasium', 'Hauptschule', 'Realschule', 'Schulen des längeren gemeinsamen Lernens'];\n\t\n\t    var columns = Object.keys(_config.SUBJECTS).map(function (s) {\n\t      return _config.SUBJECTS[s];\n\t    });\n\t    columns.splice(0, 0, null);\n\t\n\t    var getData = function getData(form) {\n\t      var _data = data.filter(function (d) {\n\t        return d.schulform == form;\n\t      });\n\t      return columns.map(function (c) {\n\t        return c ? _data.find(function (d) {\n\t          return d.fach == c;\n\t        }) : c;\n\t      });\n\t    };\n\t\n\t    var getChartData = function getChartData(data) {\n\t      var keys = Object.keys(data).filter(function (k) {\n\t        return k.indexOf('niveau') > -1 && k.indexOf('6') < 0;\n\t      }).sort().reverse();\n\t      return keys.map(function (k) {\n\t        return {\n\t          y: k,\n\t          x: data[k]\n\t        };\n\t      });\n\t    };\n\t\n\t    // header row\n\t    wrapperEl.append('div').attr('class', cssNamespace + '__row ' + cssNamespace + '__row--header').selectAll('div').data(columns).enter().append('div').attr('class', cssNamespace + '__cell').classed(cssNamespace + '__cell--empty', function (d) {\n\t      return !d;\n\t    }).text(function (d) {\n\t      return d;\n\t    });\n\t\n\t    // data rows\n\t    wrapperEl.append('div').selectAll('div').data(forms).enter().append('div').attr('class', cssNamespace + '__row ' + cssNamespace + '__row--section').html(function (d) {\n\t      return '<h3>' + d + '</h3>';\n\t    }).append('div').selectAll('div').data(function (d) {\n\t      return getData(d);\n\t    }).enter().append('div').attr('class', cssNamespace + '__cell').classed(cssNamespace + '__cell--chart', function (d) {\n\t      return d;\n\t    }).classed(cssNamespace + '__cell--empty', function (d) {\n\t      return !d;\n\t    }).append('div').attr('id', function (d) {\n\t      return d && d.chart_id;\n\t    });\n\t\n\t    // render charts into created divs\n\t    data.map(function (d) {\n\t\n\t      d3.playbooks.horizontalBarChart({\n\t        elementId: d.chart_id,\n\t        data: getChartData(d),\n\t        color: function color(d) {\n\t          return d.y.indexOf('0') < 0 && d.y.indexOf('1') < 0 ? _config.COLORS[0] : _config.COLORS[3];\n\t        },\n\t        barMargin: 10,\n\t        margin: {\n\t          top: 0,\n\t          right: 0,\n\t          bottom: 0,\n\t          left: 0\n\t        },\n\t        showXAxis: false,\n\t        // xScaleNice: false,\n\t        // xTicks: 2,\n\t        showYAxis: false,\n\t        getXDomain: function getXDomain() {\n\t          return [0, 75];\n\t        },\n\t        responsiveSvg: true\n\t      }).render();\n\t    });\n\t  });\n\t};\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _multi_mapsRender_bars = __webpack_require__(5);\n\t\n\tvar _multi_mapsRender_bars2 = _interopRequireDefault(_multi_mapsRender_bars);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t// use additional global control\n\tvar Control = riot.observable();\n\t\n\tControl.on(riot.EVT.mouseover, function (_ref) {\n\t  var sender = _ref.sender,\n\t      data = _ref.data;\n\t\n\t  var maps = riot.STORE.maps;\n\t\n\t  // hilight all other maps except 'sender'-map\n\t  // which is already hilighted\n\t  Object.keys(maps).filter(function (k) {\n\t    return k !== sender;\n\t  }).map(function (slug) {\n\t    var map = maps[slug];\n\t    map.hilight(data.RS);\n\t  });\n\t\n\t  if (sender !== riot.STORE.master) {\n\t    // trigger infobox & selector update on master map\n\t    maps[riot.STORE.master].control().trigger(riot.EVT.updateInfobox, data);\n\t    maps[riot.STORE.master].control().trigger(riot.EVT.updateSelector, data);\n\t  }\n\t});\n\t\n\texports.default = function (maps) {\n\t\n\t  Object.keys(maps).map(function (s) {\n\t    // use control instance created by `d3-playbooks.riot-components`\n\t    var control = maps[s].control();\n\t\n\t    // remove mouseout events initialized by `d3-playbooks.riot-components`:\n\t    // FIXME\n\t    // control.off(riot.EVT.mouseout)\n\t\n\t    // trigger global events\n\t    control.on(riot.EVT.mouseover, function (_ref2) {\n\t      var data = _ref2.data;\n\t\n\t      // maps[s].unhilight(maps[s])\n\t      riot.STORE.activeMap = s;\n\t      Control.trigger(riot.EVT.mouseover, { sender: s, data: data });\n\t    });\n\t\n\t    if (s === riot.STORE.master) {\n\t      // hilight other maps if master selector is used:\n\t      control.on(riot.EVT.selectorSelect, function (data) {\n\t        Control.trigger(riot.EVT.mouseover, { sender: s, data: data });\n\t      });\n\t\n\t      // draw small barchart inside infobox\n\t      control.on(riot.EVT.updateInfobox, function (data) {\n\t        // FIXME\n\t        // wait until the app knows which map is active\n\t        // (this delay is only nessecary if hovering the 'master' map for the first time\n\t        // after using another map\n\t        setTimeout(function () {\n\t          return (0, _multi_mapsRender_bars2.default)(data);\n\t        }, 10);\n\t      });\n\t    }\n\t  });\n\t};\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _config = __webpack_require__(1);\n\t\n\t// create small bar chart element once\n\tvar element = d3.select('#multi-maps-small-bars').append('div').attr('class', 'multi-map__bars-wrapper').append('div').attr('class', 'multi-map__bar-chart').classed('--hidden', true).attr('id', 'multi-map__bar-chart');\n\t\n\telement.append('h4').attr('class', 'multi-map__bar-chart-title');\n\telement.append('p').attr('class', 'annotation--small').html('Verteilung auf die Niveaustufen.<br>\"-\" = keine Niveaustufe erreicht.');\n\t\n\tvar filterKey = function filterKey(k, s) {\n\t  return k.indexOf('_rel') > -1 && k.indexOf(s) > -1 && k.indexOf('risiko') < 0;\n\t};\n\t\n\tvar getChartData = function getChartData(data) {\n\t  return Object.keys(data).filter(function (k) {\n\t    return filterKey(k, riot.STORE.activeMap);\n\t  }).sort().reverse().map(function (k, i) {\n\t    var n = 5 - i;\n\t    return {\n\t      y: n ? n : '-',\n\t      x: data[k]\n\t    };\n\t  });\n\t};\n\t\n\texports.default = function (data) {\n\t  element.classed('--hidden', false);\n\t  element.selectAll('div').remove();\n\t  element.select('h4').text('Ergebnisse f\\xFCr ' + _config.SUBJECTS[riot.STORE.activeMap]);\n\t\n\t  d3.playbooks.horizontalBarChart({\n\t    width: 300,\n\t    height: 150,\n\t    color: function color(d) {\n\t      return d.y > 1 ? _config.COLORS[0] : '#c81455';\n\t    },\n\t    elementId: 'multi-map__bar-chart',\n\t    data: getChartData(data),\n\t    barMargin: 5,\n\t    margin: {\n\t      top: 0,\n\t      right: 0,\n\t      left: 20,\n\t      bottom: 0\n\t    },\n\t    showXAxis: false,\n\t    showYLabel: false,\n\t    getXDomain: function getXDomain() {\n\t      return [0, 70];\n\t    },\n\t    // responsiveSvg: true,\n\t    drawExtra: function drawExtra(c) {\n\t      var band = c.yScale.bandwidth();\n\t      c.g.append('g').attr('class', 'bar-labels').selectAll('text').data(c.data).enter().append('text').attr('y', function (d) {\n\t        return c.yScale(d.y) + band / 2;\n\t      }).attr('x', function (d) {\n\t        return c.xScale(70);\n\t      }).attr('text-anchor', 'end').attr('dominant-baseline', 'middle').text(function (d) {\n\t        return d.x + ' %';\n\t      });\n\t    }\n\t  }).render();\n\t};\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _config = __webpack_require__(1);\n\t\n\tvar _multi_mapsAdd_events = __webpack_require__(4);\n\t\n\tvar _multi_mapsAdd_events2 = _interopRequireDefault(_multi_mapsAdd_events);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.default = function () {\n\t\n\t  // options\n\t  var dataUrl = './data/data.csv';\n\t  var geoDataUrl = './data/rvr_districts.topo.json';\n\t  var wrapperId = 'multi-maps';\n\t  var cssNamespace = 'multi-map';\n\t  var legendId = '#multi-maps-legend';\n\t  var infoboxId = '#multi-maps-infobox';\n\t  var selectorId = '#multi-maps-selector';\n\t  var width = 846;\n\t  var height = 480;\n\t  var yExtent = [0, 35];\n\t  var valueColSuffix = 'risiko_rel';\n\t\n\t  d3.json(geoDataUrl, function (d) {\n\t    var geoData = topojson.feature(d, d.objects.rvr_districts);\n\t\n\t    d3.csv(dataUrl, function (data) {\n\t\n\t      d3.playbooks.choroplethMap.defaults({\n\t        color: _config.COLORS,\n\t        nullColor: '#ededed',\n\t        cssNamespace: cssNamespace,\n\t        height: height,\n\t        width: width,\n\t        data: data,\n\t        geoData: geoData,\n\t        yExtent: yExtent,\n\t        getId: function getId(f) {\n\t          return f.properties.RS;\n\t        },\n\t        responsiveSvg: true\n\t      });\n\t\n\t      var maps = {};\n\t\n\t      // have some state data globally\n\t      riot.STORE = {\n\t        activeMap: 'math'\n\t      };\n\t\n\t      var wrapper = d3.select('#' + wrapperId);\n\t\n\t      Object.keys(_config.SUBJECTS).map(function (s, i) {\n\t        var elementId = wrapperId + '--' + s;\n\t        var element = wrapper.append('div').attr('id', elementId).attr('class', 'multi-map__container');\n\t        element.append('h4').attr('class', 'multi-map__title').text(_config.SUBJECTS[s]);\n\t        maps[s] = d3.playbooks.choroplethMap({\n\t          elementId: elementId,\n\t          yCol: s + '__' + valueColSuffix\n\t        }).render();\n\t\n\t        // render legends/infobox/selector for first iteration\n\t        if (!i) {\n\t          riot.STORE.master = s;\n\t          maps[s].infobox({\n\t            element: '#multi-maps-infobox',\n\t            template: '\\n              <h4 class=\"cor-viz-ls__infobox-title\">Anteil der Risikosch\\xFCler</h4>\\n              <table class=\"multi-map__table\">\\n                <tr class=\"multi-map__table-row multi-map__table-row--header\">\\n                  <td>{math__risiko_rel}&nbsp;%</td>\\n                  <td>{german__risiko_rel}&nbsp;%</td>\\n                  <td>{english_listen__risiko_rel}&nbsp;%</td>\\n                  <td>{english_read__risiko_rel}&nbsp;%</td>\\n                </tr>\\n                <tr class=\"multi-map__table-row\">\\n                  <td>Mathe</td>\\n                  <td>Deutsch</td>\\n                  <td>Englisch (H\\xF6ren)</td>\\n                  <td>Englisch (Lesen)</td>\\n                </tr>\\n              </table>\\n              <p class=\"data--small\">Sch\\xFCler: {participating}</p>\\n            '\n\t          }).legend({\n\t            wrapperTemplate: '\\n                <h4 class=\"multi-map__legend-title\">Anteil in %</h4>\\n                <div class=\"multi-map__legend-items\">\\n                  {body}\\n                </div>',\n\t            itemTemplate: '<span class=\"multi-map__legend-item\" style=\"background-color:{color};\">{label}</span>',\n\t            element: '#multi-maps-legend'\n\t          }).selector({\n\t            element: '#multi-maps-selector',\n\t            getLabel: function getLabel(f) {\n\t              return f.GEN;\n\t            }\n\t          });\n\t        }\n\t      });\n\t\n\t      riot.STORE.maps = maps;\n\t      (0, _multi_mapsAdd_events2.default)(maps);\n\t    });\n\t  });\n\t};\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// bundle.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 0b511aedac7201c7e491","module.exports = {\n\n  COLORS: ['#f9c280', '#dfad71', '#c59962', '#ab8454', '#917045', '#775b36', '#5e4728'],\n\n  SUBJECTS: {\n    math: 'Mathe',\n    german: 'Deutsch',\n    english_listen: 'Englisch (Hören)',\n    english_read: 'Englisch (Lesen)'\n  }\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/config.js","'use strict'\n\nif (module.hot) {\n  module.hot.accept()\n}\n\n// import 'babel-polyfill'\nimport renderMultiMaps from '../scripts/multi_maps.js'\nimport renderMultiBars from '../scripts/multi_bars.js'\nimport '../styles/index.scss'\n\nrenderMultiMaps()\nrenderMultiBars()\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/index.js","import {COLORS, SUBJECTS} from './config.js'\n\nexport default () => {\n\n  // config\n  const dataUrl = './data/schulformen.csv'\n  const cssNamespace = 'multi-bars'\n  const wrapperEl = d3.select(`#${cssNamespace}`)\n\n  d3.csv(dataUrl, data => {\n\n    const forms = [\n      'Gymnasium',\n      'Hauptschule',\n      'Realschule',\n      'Schulen des längeren gemeinsamen Lernens'\n    ]\n\n    const columns = Object.keys(SUBJECTS).map(s => SUBJECTS[s])\n    columns.splice(0, 0, null)\n\n    const getData = form => {\n      const _data = data.filter(d => d.schulform == form)\n      return columns.map(c => c ? _data.find(d => d.fach == c) : c)\n    }\n\n    const getChartData = data => {\n      const keys = Object.keys(data).filter(k => k.indexOf('niveau') > -1 && k.indexOf('6') < 0).sort().reverse()\n      return keys.map(k => {\n        return {\n          y: k,\n          x: data[k]\n        }\n      })\n    }\n\n    // header row\n    wrapperEl.append('div')\n        .attr('class', `${cssNamespace}__row ${cssNamespace}__row--header`)\n        .selectAll('div').data(columns).enter()\n      .append('div')\n        .attr('class', `${cssNamespace}__cell`)\n        .classed(`${cssNamespace}__cell--empty`, d => !d)\n        .text(d => d)\n\n    // data rows\n    wrapperEl.append('div').selectAll('div').data(forms).enter()\n      .append('div')\n        .attr('class', `${cssNamespace}__row ${cssNamespace}__row--section`)\n        .html(d => `<h3>${d}</h3>`)\n      .append('div').selectAll('div').data(d => getData(d)).enter()\n      .append('div')\n        .attr('class', `${cssNamespace}__cell`)\n        .classed(`${cssNamespace}__cell--chart`, d => d)\n        .classed(`${cssNamespace}__cell--empty`, d => !d)\n      .append('div')\n        .attr('id', d => d && d.chart_id)\n\n    // render charts into created divs\n    data.map(d => {\n\n      d3.playbooks.horizontalBarChart({\n        elementId: d.chart_id,\n        data: getChartData(d),\n        color: d => d.y.indexOf('0') < 0 && d.y.indexOf('1') < 0 ? COLORS[0] : COLORS[3],\n        barMargin: 10,\n        margin: {\n          top: 0,\n          right: 0,\n          bottom: 0,\n          left: 0\n        },\n        showXAxis: false,\n        // xScaleNice: false,\n        // xTicks: 2,\n        showYAxis: false,\n        getXDomain: () => [0, 75],\n        responsiveSvg: true,\n      }).render()\n\n    })\n\n  })\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/multi_bars.js","import renderBars from './multi_maps-render_bars.js'\n\n// use additional global control\nconst Control = riot.observable()\n\nControl.on(riot.EVT.mouseover, ({sender, data}) => {\n  const maps = riot.STORE.maps\n\n  // hilight all other maps except 'sender'-map\n  // which is already hilighted\n  Object.keys(maps).filter(k => k !== sender).map(slug => {\n    const map = maps[slug]\n    map.hilight(data.RS)\n  })\n\n  if (sender !== riot.STORE.master) {\n    // trigger infobox & selector update on master map\n    maps[riot.STORE.master].control().trigger(riot.EVT.updateInfobox, data)\n    maps[riot.STORE.master].control().trigger(riot.EVT.updateSelector, data)\n  }\n})\n\nexport default maps => {\n\n  Object.keys(maps).map(s => {\n    // use control instance created by `d3-playbooks.riot-components`\n    const control = maps[s].control()\n\n    // remove mouseout events initialized by `d3-playbooks.riot-components`:\n    // FIXME\n    // control.off(riot.EVT.mouseout)\n\n    // trigger global events\n    control.on(riot.EVT.mouseover, ({data}) => {\n      // maps[s].unhilight(maps[s])\n      riot.STORE.activeMap = s\n      Control.trigger(riot.EVT.mouseover, {sender: s, data})\n    })\n\n    if (s === riot.STORE.master) {\n      // hilight other maps if master selector is used:\n      control.on(riot.EVT.selectorSelect, data => {\n        Control.trigger(riot.EVT.mouseover, {sender: s, data})\n      })\n\n      // draw small barchart inside infobox\n      control.on(riot.EVT.updateInfobox, data => {\n        // FIXME\n        // wait until the app knows which map is active\n        // (this delay is only nessecary if hovering the 'master' map for the first time\n        // after using another map\n        setTimeout(() => renderBars(data), 10)\n      })\n    }\n  })\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/multi_maps-add_events.js","import {SUBJECTS, COLORS} from './config.js'\n\n// create small bar chart element once\nconst element = d3.select('#multi-maps-small-bars').append('div')\n    .attr('class', 'multi-map__bars-wrapper')\n  .append('div')\n    .attr('class', 'multi-map__bar-chart')\n    .classed('--hidden', true)\n    .attr('id', 'multi-map__bar-chart')\n\nelement.append('h4')\n  .attr('class', 'multi-map__bar-chart-title')\nelement.append('p')\n  .attr('class', 'annotation--small')\n  .html('Verteilung auf die Niveaustufen.<br>\"-\" = keine Niveaustufe erreicht.')\n\nconst filterKey = (k, s) => {\n  return k.indexOf('_rel') > -1 && k.indexOf(s) > -1 && k.indexOf('risiko') < 0\n}\n\nconst getChartData = data => {\n  return Object.keys(data).filter(k => filterKey(k, riot.STORE.activeMap))\n    .sort().reverse().map((k, i) => {\n    const n = 5-i\n    return {\n      y: n ? n : '-',\n      x: data[k]\n    }\n  })\n}\n\nexport default data => {\n  element.classed('--hidden', false)\n  element.selectAll('div').remove()\n  element.select('h4').text(`Ergebnisse für ${SUBJECTS[riot.STORE.activeMap]}`)\n\n  d3.playbooks.horizontalBarChart({\n    width: 300,\n    height: 150,\n    color: d => d.y > 1 ? COLORS[0] : '#c81455',\n    elementId: 'multi-map__bar-chart',\n    data: getChartData(data),\n    barMargin: 5,\n    margin: {\n      top: 0,\n      right: 0,\n      left: 20,\n      bottom: 0\n    },\n    showXAxis: false,\n    showYLabel: false,\n    getXDomain: () => [0, 70],\n    // responsiveSvg: true,\n    drawExtra: c => {\n      const band = c.yScale.bandwidth()\n      c.g.append('g')\n          .attr('class', 'bar-labels')\n          .selectAll('text')\n          .data(c.data)\n        .enter().append('text')\n          .attr('y', d => c.yScale(d.y) + band/2)\n          .attr('x', d => c.xScale(70))\n          .attr('text-anchor', 'end')\n          .attr('dominant-baseline', 'middle')\n          .text(d => `${d.x} %`)\n      }\n}).render()\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/multi_maps-render_bars.js","import {COLORS, SUBJECTS} from './config.js'\nimport addEvents from './multi_maps-add_events.js'\n\nexport default () => {\n\n  // options\n  const dataUrl = './data/data.csv'\n  const geoDataUrl = './data/rvr_districts.topo.json'\n  const wrapperId = 'multi-maps'\n  const cssNamespace = 'multi-map'\n  const legendId = '#multi-maps-legend'\n  const infoboxId = '#multi-maps-infobox'\n  const selectorId = '#multi-maps-selector'\n  const width = 846\n  const height = 480\n  const yExtent = [0, 35]\n  const valueColSuffix = 'risiko_rel'\n\n  d3.json(geoDataUrl, d => {\n    const geoData = topojson.feature(d, d.objects.rvr_districts)\n\n    d3.csv(dataUrl, data => {\n\n      d3.playbooks.choroplethMap.defaults({\n        color: COLORS,\n        nullColor: '#ededed',\n        cssNamespace,\n        height,\n        width,\n        data,\n        geoData,\n        yExtent,\n        getId: f => f.properties.RS,\n        responsiveSvg: true,\n      })\n\n      const maps = {}\n\n      // have some state data globally\n      riot.STORE = {\n        activeMap: 'math'\n      }\n\n      const wrapper = d3.select(`#${wrapperId}`)\n\n      Object.keys(SUBJECTS).map((s, i) => {\n        const elementId = `${wrapperId}--${s}`\n        const element = wrapper.append('div')\n          .attr('id', elementId)\n          .attr('class', 'multi-map__container')\n        element.append('h4').attr('class', 'multi-map__title').text(SUBJECTS[s])\n        maps[s] = d3.playbooks.choroplethMap({\n          elementId,\n          yCol: `${s}__${valueColSuffix}`\n        }).render()\n\n        // render legends/infobox/selector for first iteration\n        if (!i) {\n          riot.STORE.master = s\n          maps[s]\n            .infobox({\n              element: '#multi-maps-infobox',\n              template: `\n              <h4 class=\"cor-viz-ls__infobox-title\">Anteil der Risikoschüler</h4>\n              <table class=\"multi-map__table\">\n                <tr class=\"multi-map__table-row multi-map__table-row--header\">\n                  <td>{math__risiko_rel}&nbsp;%</td>\n                  <td>{german__risiko_rel}&nbsp;%</td>\n                  <td>{english_listen__risiko_rel}&nbsp;%</td>\n                  <td>{english_read__risiko_rel}&nbsp;%</td>\n                </tr>\n                <tr class=\"multi-map__table-row\">\n                  <td>Mathe</td>\n                  <td>Deutsch</td>\n                  <td>Englisch (Hören)</td>\n                  <td>Englisch (Lesen)</td>\n                </tr>\n              </table>\n              <p class=\"data--small\">Schüler: {participating}</p>\n            `\n            })\n            .legend({\n              wrapperTemplate: `\n                <h4 class=\"multi-map__legend-title\">Anteil in %</h4>\n                <div class=\"multi-map__legend-items\">\n                  {body}\n                </div>`,\n              itemTemplate: '<span class=\"multi-map__legend-item\" style=\"background-color:{color};\">{label}</span>',\n              element: '#multi-maps-legend'\n            })\n            .selector({\n              element: '#multi-maps-selector',\n              getLabel: f => f.GEN\n            })\n        }\n\n      })\n\n      riot.STORE.maps = maps\n      addEvents(maps)\n\n    })\n\n  })\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/multi_maps.js"],"sourceRoot":""}