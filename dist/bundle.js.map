{"version":3,"sources":["webpack:///bundle.js","webpack:///webpack/bootstrap f2efb0ba3fe432a428aa","webpack:///./src/scripts/config.js","webpack:///./src/scripts/render_div_bars.js","webpack:///./src/scripts/index.js","webpack:///./src/scripts/multi_bars.js","webpack:///./src/scripts/multi_maps-add_events.js","webpack:///./src/scripts/multi_maps-render_bars.js","webpack:///./src/scripts/multi_maps.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","COLORS","SUBJECTS","math","german","english_listen","english_read","Object","defineProperty","value","default","element","data","selectAll","enter","append","attr","classed","d","x","style","y","text","Math","round","_interopRequireDefault","obj","__esModule","_multi_maps","_multi_maps2","_multi_bars","_multi_bars2","_config","_render_div_bars","_render_div_bars2","dataUrl","cssNamespace","wrapperEl","d3","select","csv","forms","yLabels","columns","keys","map","s","splice","getData","form","_data","filter","schulform","find","fach","getChartData","k","indexOf","sort","i","sectionRows","html","rows","chart_id","l","_multi_mapsRender_bars","_multi_mapsRender_bars2","Control","riot","observable","on","EVT","mouseover","_ref","sender","maps","STORE","slug","hilight","RS","master","control","trigger","updateInfobox","updateSelector","_ref2","activeMap","selectorSelect","setTimeout","filterKey","smallBars","el","_multi_mapsAdd_events","_multi_mapsAdd_events2","geoDataUrl","wrapperId","width","height","yExtent","valueColSuffix","json","geoData","topojson","feature","objects","nrw_districts_fixed","playbooks","choroplethMap","defaults","color","nullColor","getId","f","properties","responsiveSvg","wrapper","elementId","yCol","render","infobox","template","legend","wrapperTemplate","itemTemplate","selector","getLabel","GEN"],"mappings":"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","file":"bundle.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(3);\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tmodule.exports = {\n\t\n\t  COLORS: ['#f9c280', '#dfad71', '#c59962', '#ab8454', '#917045', '#775b36', '#5e4728'],\n\t\n\t  SUBJECTS: {\n\t    math: 'Mathe',\n\t    german: 'Deutsch',\n\t    english_listen: 'Englisch (HÃ¶ren)',\n\t    english_read: 'Englisch (Lesen)'\n\t  }\n\t\n\t};\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (element, data) {\n\t  element.selectAll('div').data(data).enter().append('div').attr('class', 'divbars__bar-outer').append('div').attr('class', 'divbars__bar').classed('divbars__bar--hilight', function (d) {\n\t    return !(d.x > 1);\n\t  }).style('width', function (d) {\n\t    return d.y * 1.3 + '%';\n\t  }) // FIXME\n\t  .append('span').attr('class', 'divbars__bar-label').text(function (d) {\n\t    return Math.round(d.y) + ' %';\n\t  });\n\t};\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _multi_maps = __webpack_require__(7);\n\t\n\tvar _multi_maps2 = _interopRequireDefault(_multi_maps);\n\t\n\tvar _multi_bars = __webpack_require__(4);\n\t\n\tvar _multi_bars2 = _interopRequireDefault(_multi_bars);\n\t\n\t__webpack_require__(8);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tif (false) {\n\t  module.hot.accept();\n\t}\n\t\n\t// import 'babel-polyfill'\n\t\n\t\n\t(0, _multi_maps2.default)();\n\t(0, _multi_bars2.default)();\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _config = __webpack_require__(1);\n\t\n\tvar _render_div_bars = __webpack_require__(2);\n\t\n\tvar _render_div_bars2 = _interopRequireDefault(_render_div_bars);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.default = function () {\n\t\n\t  // config\n\t  var dataUrl = './data/schulformen.csv';\n\t  var cssNamespace = 'multi-bars';\n\t  var wrapperEl = d3.select('#' + cssNamespace);\n\t\n\t  d3.csv(dataUrl, function (data) {\n\t\n\t    var forms = ['Gymnasium', 'Hauptschule', 'Realschule', 'Schulen des lÃ¤ngeren gemeinsamen Lernens'];\n\t\n\t    var yLabels = ['kein Niveau', 'Niveaustufe&nbsp;1', 'Niveaustuf&nbsp;2', 'Niveaustufe&nbsp;3', 'Niveaustufe&nbsp;4', 'Niveaustufe&nbsp;5'];\n\t\n\t    var columns = Object.keys(_config.SUBJECTS).map(function (s) {\n\t      return _config.SUBJECTS[s];\n\t    });\n\t    columns.splice(0, 0, null);\n\t\n\t    var getData = function getData(form) {\n\t      var _data = data.filter(function (d) {\n\t        return d.schulform == form;\n\t      });\n\t      return columns.map(function (c) {\n\t        return _data.find(function (d) {\n\t          return d.fach == c;\n\t        });\n\t      });\n\t    };\n\t\n\t    var getChartData = function getChartData(data) {\n\t      return Object.keys(data).filter(function (k) {\n\t        return k.indexOf('niveau') > -1 && k.indexOf('6') < 0;\n\t      }).sort().map(function (k, i) {\n\t        return {\n\t          x: i || '-',\n\t          y: data[k]\n\t        };\n\t      });\n\t    };\n\t\n\t    var sectionRows = wrapperEl.append('div').selectAll('div').data(forms).enter().append('div').attr('class', cssNamespace + '__row ' + cssNamespace + '__row--section').html(function (d) {\n\t      return '<h3>' + d + '</h3>';\n\t    });\n\t\n\t    // annotation for mobile display\n\t    sectionRows.append('span').attr('class', 'annotation--smaller --mobile-only').text('Verteilung auf die Niveaustufen. \"-\" = keine Niveaustufe erreicht.');\n\t\n\t    sectionRows.call(function (rows) {\n\t      columns.map(function (c) {\n\t        // first columns are labels\n\t        if (!c) {\n\t          rows.append('div').attr('class', cssNamespace + '__cell ' + cssNamespace + '__cell--labels').selectAll('span').data(yLabels).enter().append('span').attr('class', cssNamespace + '__label').html(function (l) {\n\t            return l;\n\t          });\n\t        } else {\n\t          rows.selectAll('div').data(function (d) {\n\t            return getData(d);\n\t          }).enter().append('div').attr('class', cssNamespace + '__cell ' + cssNamespace + '__cell--chart').append('div')\n\t          // create element in which the charts will be rendered into\n\t          .attr('id', function (d) {\n\t            return d && d.chart_id;\n\t          }).append('span').attr('class', 'chart-title').text(function (d) {\n\t            return d.fach;\n\t          });\n\t        }\n\t      });\n\t    });\n\t\n\t    // render bars into created divs\n\t    data.map(function (d) {\n\t      d3.select('#' + d.chart_id).call(function (element) {\n\t        (0, _render_div_bars2.default)(element, getChartData(d));\n\t      })\n\t      // add labes for mobile\n\t      .selectAll('div.divbars__bar').append('span').attr('class', 'multi-bars__mobile-labels --mobile-only').text(function (d) {\n\t        return d.x;\n\t      });\n\t    });\n\t  });\n\t};\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _multi_mapsRender_bars = __webpack_require__(6);\n\t\n\tvar _multi_mapsRender_bars2 = _interopRequireDefault(_multi_mapsRender_bars);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t// use additional global control\n\tvar Control = riot.observable();\n\t\n\tControl.on(riot.EVT.mouseover, function (_ref) {\n\t  var sender = _ref.sender,\n\t      data = _ref.data;\n\t\n\t  var maps = riot.STORE.maps;\n\t\n\t  // hilight all other maps except 'sender'-map\n\t  // which is already hilighted\n\t  Object.keys(maps).filter(function (k) {\n\t    return k !== sender;\n\t  }).map(function (slug) {\n\t    var map = maps[slug];\n\t    map.hilight(data.RS);\n\t  });\n\t\n\t  if (sender !== riot.STORE.master) {\n\t    // trigger infobox & selector update on master map\n\t    maps[riot.STORE.master].control().trigger(riot.EVT.updateInfobox, data);\n\t    maps[riot.STORE.master].control().trigger(riot.EVT.updateSelector, data);\n\t  }\n\t});\n\t\n\texports.default = function (maps) {\n\t\n\t  Object.keys(maps).map(function (s) {\n\t    // use control instance created by `d3-playbooks.riot-components`\n\t    var control = maps[s].control();\n\t\n\t    // remove mouseout events initialized by `d3-playbooks.riot-components`:\n\t    // FIXME\n\t    // control.off(riot.EVT.mouseout)\n\t\n\t    // trigger global events\n\t    control.on(riot.EVT.mouseover, function (_ref2) {\n\t      var data = _ref2.data;\n\t\n\t      // maps[s].unhilight(maps[s])\n\t      riot.STORE.activeMap = s;\n\t      Control.trigger(riot.EVT.mouseover, { sender: s, data: data });\n\t    });\n\t\n\t    if (s === riot.STORE.master) {\n\t      // hilight other maps if master selector is used:\n\t      control.on(riot.EVT.selectorSelect, function (data) {\n\t        Control.trigger(riot.EVT.mouseover, { sender: s, data: data });\n\t      });\n\t\n\t      // draw small barchart inside infobox\n\t      control.on(riot.EVT.updateInfobox, function (data) {\n\t        // FIXME\n\t        // wait until the app knows which map is active\n\t        // (this delay is only nessecary if hovering the 'master' map for the first time\n\t        // after using another map\n\t        setTimeout(function () {\n\t          return (0, _multi_mapsRender_bars2.default)(data);\n\t        }, 10);\n\t      });\n\t    }\n\t  });\n\t};\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _config = __webpack_require__(1);\n\t\n\tvar _render_div_bars = __webpack_require__(2);\n\t\n\tvar _render_div_bars2 = _interopRequireDefault(_render_div_bars);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t// create small bar chart element once\n\tvar element = d3.select('#multi-maps-small-bars').append('div').attr('class', 'multi-map__bars-wrapper').append('div').attr('class', 'multi-map__bar-chart').classed('--hidden', true).attr('id', 'multi-map__bar-chart');\n\t\n\telement.append('h4').attr('class', 'multi-map__bar-chart-title');\n\telement.append('p').attr('class', 'annotation--small').html('Verteilung auf die Niveaustufen.<br>\"-\" = keine Niveaustufe erreicht.');\n\t\n\tvar filterKey = function filterKey(k, s) {\n\t  return k.indexOf('_rel') > -1 && k.indexOf(s) > -1 && k.indexOf('risiko') < 0;\n\t};\n\t\n\tvar getChartData = function getChartData(data) {\n\t  return Object.keys(data).filter(function (k) {\n\t    return filterKey(k, riot.STORE.activeMap);\n\t  }).sort().map(function (k, i) {\n\t    return {\n\t      x: i || '-',\n\t      y: data[k]\n\t    };\n\t  });\n\t};\n\t\n\texports.default = function (data) {\n\t  // compute data\n\t  var _data = getChartData(data);\n\t\n\t  // update headline\n\t  element.select('h4').text('Ergebnisse f\\xFCr ' + _config.SUBJECTS[riot.STORE.activeMap]);\n\t\n\t  if (!riot.STORE.smallBars) {\n\t    riot.STORE.smallBars = true;\n\t    // unhide element\n\t    element.classed('--hidden', false);\n\t    // create the bars for the first time\n\t    element.call(function (el) {\n\t      return (0, _render_div_bars2.default)(el, _data);\n\t    }).selectAll('div.divbars__bar').append('span').attr('class', 'multi-map__bar-label').text(function (d) {\n\t      return d.x;\n\t    });\n\t  } else {\n\t    // update bar widths\n\t    element.selectAll('div.divbars__bar').data(_data).style('width', function (d) {\n\t      return d.y * 1.3 + '%';\n\t    }); // FIXME\n\t    element.selectAll('span.divbars__bar-label').data(_data).text(function (d) {\n\t      return Math.round(d.y) + ' %';\n\t    });\n\t  }\n\t};\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _config = __webpack_require__(1);\n\t\n\tvar _multi_mapsAdd_events = __webpack_require__(5);\n\t\n\tvar _multi_mapsAdd_events2 = _interopRequireDefault(_multi_mapsAdd_events);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.default = function () {\n\t\n\t  // options\n\t  var dataUrl = './data/data.csv';\n\t  // const geoDataUrl = './data/rvr_districts.topo.json'\n\t  // const geoDataUrl = './data/nrw_districts.topo.json'\n\t  var geoDataUrl = './data/nrw_districts_excerpt_fixed.topo.json';\n\t  var wrapperId = 'multi-maps';\n\t  var cssNamespace = 'multi-map';\n\t  var legendId = '#multi-maps-legend';\n\t  var infoboxId = '#multi-maps-infobox';\n\t  var selectorId = '#multi-maps-selector';\n\t  var width = 800;\n\t  var height = 600;\n\t  // rvr shape:\n\t  // const width = 846\n\t  // const height = 480\n\t  var yExtent = [0, 35];\n\t  var valueColSuffix = 'risiko_rel';\n\t\n\t  d3.json(geoDataUrl, function (d) {\n\t    // const geoData = topojson.feature(d, d.objects.rvr_districts)\n\t    var geoData = topojson.feature(d, d.objects.nrw_districts_fixed);\n\t\n\t    d3.csv(dataUrl, function (data) {\n\t\n\t      d3.playbooks.choroplethMap.defaults({\n\t        color: _config.COLORS,\n\t        nullColor: '#ededed',\n\t        cssNamespace: cssNamespace,\n\t        height: height,\n\t        width: width,\n\t        data: data,\n\t        geoData: geoData,\n\t        yExtent: yExtent,\n\t        getId: function getId(f) {\n\t          return f.properties.RS;\n\t        },\n\t        responsiveSvg: true\n\t      });\n\t\n\t      var maps = {};\n\t\n\t      // have some state data globally\n\t      riot.STORE = {\n\t        activeMap: 'math',\n\t        smallBars: false\n\t      };\n\t\n\t      var wrapper = d3.select('#' + wrapperId);\n\t\n\t      Object.keys(_config.SUBJECTS).map(function (s, i) {\n\t        var elementId = wrapperId + '--' + s;\n\t        var element = wrapper.append('div').attr('id', elementId).attr('class', 'multi-map__container');\n\t        element.append('h4').attr('class', 'multi-map__title').text(_config.SUBJECTS[s]);\n\t        maps[s] = d3.playbooks.choroplethMap({\n\t          elementId: elementId,\n\t          yCol: s + '__' + valueColSuffix\n\t        }).render();\n\t\n\t        // render legends/infobox/selector for first iteration\n\t        if (!i) {\n\t          riot.STORE.master = s;\n\t          maps[s].infobox({\n\t            element: '#multi-maps-infobox',\n\t            template: '\\n              <h4 class=\"cor-viz-ls__infobox-title\">Anteil der Risikosch\\xFCler</h4>\\n              <table class=\"multi-map__table\">\\n                <tr class=\"multi-map__table-row multi-map__table-row--header\">\\n                  <td>{math__risiko_rel}&nbsp;%</td>\\n                  <td>{german__risiko_rel}&nbsp;%</td>\\n                  <td>{english_listen__risiko_rel}&nbsp;%</td>\\n                  <td>{english_read__risiko_rel}&nbsp;%</td>\\n                </tr>\\n                <tr class=\"multi-map__table-row\">\\n                  <td>Mathe</td>\\n                  <td>Deutsch</td>\\n                  <td>Englisch (H\\xF6ren)</td>\\n                  <td>Englisch (Lesen)</td>\\n                </tr>\\n              </table>\\n              <p class=\"data--small\">Achtkl\\xE4ssler, die in <strong>{GEN}</strong> an der Lernstandserhebung teilgenommen haben: <strong>{participating}</strong></p>\\n            '\n\t          }).legend({\n\t            wrapperTemplate: '\\n                <h4 class=\"multi-map__legend-title\">Anteil in %</h4>\\n                <div class=\"multi-map__legend-items\">\\n                  {body}\\n                </div>',\n\t            itemTemplate: '<span class=\"multi-map__legend-item\" style=\"background-color:{color};\">{label}</span>',\n\t            element: '#multi-maps-legend'\n\t          }).selector({\n\t            element: '#multi-maps-selector',\n\t            getLabel: function getLabel(f) {\n\t              return f.GEN;\n\t            }\n\t          });\n\t        }\n\t      });\n\t\n\t      riot.STORE.maps = maps;\n\t      (0, _multi_mapsAdd_events2.default)(maps);\n\t    });\n\t  });\n\t};\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// bundle.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f2efb0ba3fe432a428aa","module.exports = {\n\n  COLORS: ['#f9c280', '#dfad71', '#c59962', '#ab8454', '#917045', '#775b36', '#5e4728'],\n\n  SUBJECTS: {\n    math: 'Mathe',\n    german: 'Deutsch',\n    english_listen: 'Englisch (HÃ¶ren)',\n    english_read: 'Englisch (Lesen)'\n  }\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/config.js","export default (element, data) => {\n  element.selectAll('div').data(data).enter()\n    .append('div')\n      .attr('class', 'divbars__bar-outer')\n    .append('div')\n      .attr('class', 'divbars__bar')\n      .classed('divbars__bar--hilight', d => !(d.x > 1))\n      .style('width', d => `${d.y * 1.3}%`)  // FIXME\n    .append('span')\n      .attr('class', 'divbars__bar-label')\n      .text(d => `${Math.round(d.y)} %`)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/render_div_bars.js","'use strict'\n\nif (module.hot) {\n  module.hot.accept()\n}\n\n// import 'babel-polyfill'\nimport renderMultiMaps from '../scripts/multi_maps.js'\nimport renderMultiBars from '../scripts/multi_bars.js'\nimport '../styles/index.scss'\n\nrenderMultiMaps()\nrenderMultiBars()\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/index.js","import {COLORS, SUBJECTS} from './config.js'\nimport renderDivBars from './render_div_bars.js'\n\nexport default () => {\n\n  // config\n  const dataUrl = './data/schulformen.csv'\n  const cssNamespace = 'multi-bars'\n  const wrapperEl = d3.select(`#${cssNamespace}`)\n\n  d3.csv(dataUrl, data => {\n\n    const forms = [\n      'Gymnasium',\n      'Hauptschule',\n      'Realschule',\n      'Schulen des lÃ¤ngeren gemeinsamen Lernens'\n    ]\n\n    const yLabels = [\n      'kein Niveau',\n      'Niveaustufe&nbsp;1',\n      'Niveaustuf&nbsp;2',\n      'Niveaustufe&nbsp;3',\n      'Niveaustufe&nbsp;4',\n      'Niveaustufe&nbsp;5',\n    ]\n\n    const columns = Object.keys(SUBJECTS).map(s => SUBJECTS[s])\n    columns.splice(0, 0, null)\n\n    const getData = form => {\n      const _data = data.filter(d => d.schulform == form)\n      return columns.map(c => _data.find(d => d.fach == c))\n    }\n\n    const getChartData = data => {\n      return Object.keys(data).filter(k => k.indexOf('niveau') > -1 && k.indexOf('6') < 0)\n        .sort().map((k, i) => {\n        return {\n          x: i || '-',\n          y: data[k]\n        }\n      })\n    }\n\n    const sectionRows = wrapperEl.append('div').selectAll('div').data(forms).enter()\n        .append('div')\n          .attr('class', `${cssNamespace}__row ${cssNamespace}__row--section`)\n          .html(d => `<h3>${d}</h3>`)\n\n    // annotation for mobile display\n    sectionRows.append('span')\n      .attr('class', 'annotation--smaller --mobile-only')\n      .text('Verteilung auf die Niveaustufen. \"-\" = keine Niveaustufe erreicht.')\n\n    sectionRows.call(rows => {\n      columns.map(c => {\n        // first columns are labels\n        if (!c) {\n          rows.append('div').attr('class', `${cssNamespace}__cell ${cssNamespace}__cell--labels`)\n              .selectAll('span').data(yLabels).enter()\n            .append('span')\n              .attr('class', `${cssNamespace}__label`)\n              .html(l => l)\n        } else {\n          rows.selectAll('div').data(d => getData(d)).enter()\n            .append('div')\n              .attr('class', `${cssNamespace}__cell ${cssNamespace}__cell--chart`)\n            .append('div')\n              // create element in which the charts will be rendered into\n              .attr('id', d => d && d.chart_id)\n            .append('span')\n              .attr('class', 'chart-title')\n              .text(d => d.fach)\n        }\n      })\n\n    })\n\n    // render bars into created divs\n    data.map(d => {\n      d3.select(`#${d.chart_id}`).call(element => {\n        renderDivBars(element, getChartData(d))\n      })\n      // add labes for mobile\n        .selectAll('div.divbars__bar')\n      .append('span')\n        .attr('class', 'multi-bars__mobile-labels --mobile-only')\n        .text(d => d.x)\n    })\n\n  })\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/multi_bars.js","import renderBars from './multi_maps-render_bars.js'\n\n// use additional global control\nconst Control = riot.observable()\n\nControl.on(riot.EVT.mouseover, ({sender, data}) => {\n  const maps = riot.STORE.maps\n\n  // hilight all other maps except 'sender'-map\n  // which is already hilighted\n  Object.keys(maps).filter(k => k !== sender).map(slug => {\n    const map = maps[slug]\n    map.hilight(data.RS)\n  })\n\n  if (sender !== riot.STORE.master) {\n    // trigger infobox & selector update on master map\n    maps[riot.STORE.master].control().trigger(riot.EVT.updateInfobox, data)\n    maps[riot.STORE.master].control().trigger(riot.EVT.updateSelector, data)\n  }\n})\n\nexport default maps => {\n\n  Object.keys(maps).map(s => {\n    // use control instance created by `d3-playbooks.riot-components`\n    const control = maps[s].control()\n\n    // remove mouseout events initialized by `d3-playbooks.riot-components`:\n    // FIXME\n    // control.off(riot.EVT.mouseout)\n\n    // trigger global events\n    control.on(riot.EVT.mouseover, ({data}) => {\n      // maps[s].unhilight(maps[s])\n      riot.STORE.activeMap = s\n      Control.trigger(riot.EVT.mouseover, {sender: s, data})\n    })\n\n    if (s === riot.STORE.master) {\n      // hilight other maps if master selector is used:\n      control.on(riot.EVT.selectorSelect, data => {\n        Control.trigger(riot.EVT.mouseover, {sender: s, data})\n      })\n\n      // draw small barchart inside infobox\n      control.on(riot.EVT.updateInfobox, data => {\n        // FIXME\n        // wait until the app knows which map is active\n        // (this delay is only nessecary if hovering the 'master' map for the first time\n        // after using another map\n        setTimeout(() => renderBars(data), 10)\n      })\n    }\n  })\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/multi_maps-add_events.js","import {SUBJECTS, COLORS} from './config.js'\nimport renderDivBars from './render_div_bars.js'\n\n// create small bar chart element once\nconst element = d3.select('#multi-maps-small-bars').append('div')\n    .attr('class', 'multi-map__bars-wrapper')\n  .append('div')\n    .attr('class', 'multi-map__bar-chart')\n    .classed('--hidden', true)\n    .attr('id', 'multi-map__bar-chart')\n\nelement.append('h4')\n  .attr('class', 'multi-map__bar-chart-title')\nelement.append('p')\n  .attr('class', 'annotation--small')\n  .html('Verteilung auf die Niveaustufen.<br>\"-\" = keine Niveaustufe erreicht.')\n\nconst filterKey = (k, s) => {\n  return k.indexOf('_rel') > -1 && k.indexOf(s) > -1 && k.indexOf('risiko') < 0\n}\n\nconst getChartData = data => {\n  return Object.keys(data).filter(k => filterKey(k, riot.STORE.activeMap))\n    .sort().map((k, i) => {\n    return {\n      x: i || '-',\n      y: data[k]\n    }\n  })\n}\n\nexport default data => {\n  // compute data\n  const _data = getChartData(data)\n\n  // update headline\n  element.select('h4').text(`Ergebnisse fÃ¼r ${SUBJECTS[riot.STORE.activeMap]}`)\n\n  if (!riot.STORE.smallBars) {\n    riot.STORE.smallBars = true\n    // unhide element\n    element.classed('--hidden', false)\n    // create the bars for the first time\n    element.call(el => renderDivBars(el, _data))\n        .selectAll('div.divbars__bar')\n      .append('span')\n        .attr('class', 'multi-map__bar-label')\n        .text(d => d.x)\n  } else {\n    // update bar widths\n    element.selectAll('div.divbars__bar').data(_data)\n        .style('width', d => `${d.y * 1.3}%`)  // FIXME\n    element.selectAll('span.divbars__bar-label').data(_data)\n        .text(d => `${Math.round(d.y)} %`)\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/multi_maps-render_bars.js","import {COLORS, SUBJECTS} from './config.js'\nimport addEvents from './multi_maps-add_events.js'\n\nexport default () => {\n\n  // options\n  const dataUrl = './data/data.csv'\n  // const geoDataUrl = './data/rvr_districts.topo.json'\n  // const geoDataUrl = './data/nrw_districts.topo.json'\n  const geoDataUrl = './data/nrw_districts_excerpt_fixed.topo.json'\n  const wrapperId = 'multi-maps'\n  const cssNamespace = 'multi-map'\n  const legendId = '#multi-maps-legend'\n  const infoboxId = '#multi-maps-infobox'\n  const selectorId = '#multi-maps-selector'\n  const width = 800\n  const height = 600\n  // rvr shape:\n  // const width = 846\n  // const height = 480\n  const yExtent = [0, 35]\n  const valueColSuffix = 'risiko_rel'\n\n  d3.json(geoDataUrl, d => {\n    // const geoData = topojson.feature(d, d.objects.rvr_districts)\n    const geoData = topojson.feature(d, d.objects.nrw_districts_fixed)\n\n    d3.csv(dataUrl, data => {\n\n      d3.playbooks.choroplethMap.defaults({\n        color: COLORS,\n        nullColor: '#ededed',\n        cssNamespace,\n        height,\n        width,\n        data,\n        geoData,\n        yExtent,\n        getId: f => f.properties.RS,\n        responsiveSvg: true,\n        // projection: d3.geoEquirectangular()\n      })\n\n      const maps = {}\n\n      // have some state data globally\n      riot.STORE = {\n        activeMap: 'math',\n        smallBars: false\n      }\n\n      const wrapper = d3.select(`#${wrapperId}`)\n\n      Object.keys(SUBJECTS).map((s, i) => {\n        const elementId = `${wrapperId}--${s}`\n        const element = wrapper.append('div')\n          .attr('id', elementId)\n          .attr('class', 'multi-map__container')\n        element.append('h4').attr('class', 'multi-map__title').text(SUBJECTS[s])\n        maps[s] = d3.playbooks.choroplethMap({\n          elementId,\n          yCol: `${s}__${valueColSuffix}`\n        }).render()\n\n        // render legends/infobox/selector for first iteration\n        if (!i) {\n          riot.STORE.master = s\n          maps[s]\n            .infobox({\n              element: '#multi-maps-infobox',\n              template: `\n              <h4 class=\"cor-viz-ls__infobox-title\">Anteil der RisikoschÃ¼ler</h4>\n              <table class=\"multi-map__table\">\n                <tr class=\"multi-map__table-row multi-map__table-row--header\">\n                  <td>{math__risiko_rel}&nbsp;%</td>\n                  <td>{german__risiko_rel}&nbsp;%</td>\n                  <td>{english_listen__risiko_rel}&nbsp;%</td>\n                  <td>{english_read__risiko_rel}&nbsp;%</td>\n                </tr>\n                <tr class=\"multi-map__table-row\">\n                  <td>Mathe</td>\n                  <td>Deutsch</td>\n                  <td>Englisch (HÃ¶ren)</td>\n                  <td>Englisch (Lesen)</td>\n                </tr>\n              </table>\n              <p class=\"data--small\">AchtklÃ¤ssler, die in <strong>{GEN}</strong> an der Lernstandserhebung teilgenommen haben: <strong>{participating}</strong></p>\n            `\n            })\n            .legend({\n              wrapperTemplate: `\n                <h4 class=\"multi-map__legend-title\">Anteil in %</h4>\n                <div class=\"multi-map__legend-items\">\n                  {body}\n                </div>`,\n              itemTemplate: '<span class=\"multi-map__legend-item\" style=\"background-color:{color};\">{label}</span>',\n              element: '#multi-maps-legend'\n            })\n            .selector({\n              element: '#multi-maps-selector',\n              getLabel: f => f.GEN\n            })\n        }\n\n      })\n\n      riot.STORE.maps = maps\n      addEvents(maps)\n\n    })\n\n  })\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/multi_maps.js"],"sourceRoot":""}