!function(t){function e(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return t[r].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports=n(2)},function(t,e){"use strict";t.exports={COLORS:["#f9c280","#dfad71","#c59962","#ab8454","#917045","#775b36","#5e4728"],SUBJECTS:{math:"Mathe",german:"Deutsch",english_listen:"Englisch (Hören)",english_read:"Englisch (Lesen)"}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var a=n(5),i=r(a),l=n(3),o=r(l);n(6),(0,i.default)(),(0,o.default)()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1);e.default=function(){var t="./data/schulformen.csv",e="multi-bars",n=d3.select("#"+e);d3.csv(t,function(t){var a=["Gymnasium","Hauptschule","Realschule","Schulen des längeren gemeinsamen Lernens"],i=Object.keys(r.SUBJECTS).map(function(t){return r.SUBJECTS[t]});i.splice(0,0,null);var l=function(e){var n=t.filter(function(t){return t.schulform==e});return i.map(function(t){return t?n.find(function(e){return e.fach==t}):t})},o=function(t){var e=Object.keys(t).filter(function(t){return t.indexOf("niveau")>-1&&t.indexOf("6")<0}).sort().reverse();return e.map(function(e){return{y:e,x:t[e]}})};n.append("div").attr("class",e+"__row "+e+"__row--header").selectAll("div").data(i).enter().append("div").attr("class",e+"__cell").classed(e+"__cell--empty",function(t){return!t}).text(function(t){return t}),n.append("div").selectAll("div").data(a).enter().append("div").attr("class",e+"__row "+e+"__row--section").html(function(t){return"<h3>"+t+"</h3>"}).append("div").selectAll("div").data(function(t){return l(t)}).enter().append("div").attr("class",e+"__cell").classed(e+"__cell--chart",function(t){return t}).classed(e+"__cell--empty",function(t){return!t}).append("div").attr("id",function(t){return t&&t.chart_id}),t.map(function(t){d3.playbooks.horizontalBarChart({elementId:t.chart_id,data:o(t),color:function(t){return t.y.indexOf("0")<0&&t.y.indexOf("1")<0?r.COLORS[0]:r.COLORS[3]},barMargin:10,margin:{top:0,right:0,bottom:0,left:0},showXAxis:!1,showYAxis:!1,getXDomain:function(){return[0,75]},responsiveSvg:!0}).render()})})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),a=Object.keys(r.SUBJECTS).map(function(t){return{key:t,name:r.SUBJECTS[t],chart_id:t+"__bar-chart"}}),i=d3.select("#multi-maps-small-bars").append("div").attr("class","multi-map__bars-wrapper").selectAll("div").data(a).enter().append("div").attr("class","multi-map__bar-chart").classed("--hidden",!0).attr("id",function(t){return t.chart_id}).html(function(t){return"<h4>"+t.name+"</h4>"}),l=function(t,e){return t.indexOf("_rel")>-1&&t.indexOf(e)>-1&&t.indexOf("risiko")<0},o=function(t){var e={},n=!0,r=!1,i=void 0;try{for(var o,s=function(){var n=o.value;e[n.key]=Object.keys(t).filter(function(t){return l(t,n.key)}).sort().reverse().map(function(e){return{y:e,x:t[e]}})},c=a[Symbol.iterator]();!(n=(o=c.next()).done);n=!0)s()}catch(t){r=!0,i=t}finally{try{!n&&c.return&&c.return()}finally{if(r)throw i}}return e};e.default=function(t){i.classed("--hidden",!1),i.selectAll("div").remove();var e=o(t);a.map(function(t){d3.playbooks.horizontalBarChart({width:300,height:100,color:function(t){return t.y.indexOf("0")<0&&t.y.indexOf("1")<0?r.COLORS[0]:r.COLORS[3]},elementId:t.chart_id,data:e[t.key],margin:{top:0,right:0,left:0,bottom:0},showXAxis:!1,showYAxis:!1,getXDomain:function(){return[0,75]}}).render()})}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),i=n(4),l=r(i);e.default=function(){var t="./data/data.csv",e="./data/rvr_districts.topo.json",n="multi-maps",r="multi-map",i=846,o=480,s=[0,35],c="risiko_rel";d3.json(e,function(e){var d=topojson.feature(e,e.objects.rvr_districts);d3.csv(t,function(t){d3.playbooks.choroplethMap.defaults({color:a.COLORS,nullColor:"#ededed",cssNamespace:r,height:o,width:i,data:t,geoData:d,yExtent:s,getId:function(t){return t.properties.RS},responsiveSvg:!0});var e={},u=function(t,n,r){if(Object.keys(e).filter(function(t){return t!==n}).map(function(t){e[t].hilight(r)}),!t){var a=e[Object.keys(e)[0]].control();a.trigger(riot.EVT.updateInfobox,r),a.trigger(riot.EVT.updateSelector,r)}},p=d3.select("#"+n),f=0;Object.keys(a.SUBJECTS).map(function(t){var r=n+"--"+t,i=p.append("div").attr("id",r).attr("class","multi-map__container");i.append("h4").attr("class","multi-map__title").text(a.SUBJECTS[t]),e[t]=d3.playbooks.choroplethMap({elementId:r,yCol:t+"__"+c}).render(),f?e[t].control().on(riot.EVT.mouseover,function(e){var n=e.data;return u(!1,t,n)}):(e[t].infobox({element:"#multi-maps-infobox",template:'\n              <h4 class="cor-viz-ls__infobox-title">Anteil der Risikoschüler</h4>\n              <table class="multi-map__table">\n                <tr class="multi-map__table-row multi-map__table-row--header">\n                  <td>{math__risiko_rel}&nbsp;%</td>\n                  <td>{german__risiko_rel}&nbsp;%</td>\n                  <td>{english_listen__risiko_rel}&nbsp;%</td>\n                  <td>{english_read__risiko_rel}&nbsp;%</td>\n                </tr>\n                <tr class="multi-map__table-row">\n                  <td>Mathe</td>\n                  <td>Deutsch</td>\n                  <td>Englisch (Hören)</td>\n                  <td>Englisch (Lesen)</td>\n                </tr>\n              </table>\n              <p class="data--small">Teilnehmer: {participating}</p>\n            '}).legend({wrapperTemplate:'\n                <h4 class="multi-map__legend-title">Anteil in %</h4>\n                <div class="multi-map__legend-items">\n                  {body}\n                </div>',itemTemplate:'<span class="multi-map__legend-item" style="background-color:{color};">{label}</span>',element:"#multi-maps-legend"}).selector({element:"#multi-maps-selector",getLabel:function(t){return t.GEN}}),e[t].control().on(riot.EVT.updateInfobox,function(e){(0,l.default)(e),u(!0,t,e)})),f++})})})}},function(t,e){}]);
//# sourceMappingURL=bundle.js.map