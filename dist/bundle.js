!function(t){function e(n){if(r[n])return r[n].exports;var a=r[n]={exports:{},id:n,loaded:!1};return t[n].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){t.exports=r(2)},function(t,e){"use strict";t.exports={COLORS:["#f9c280","#dfad71","#c59962","#ab8454","#917045","#775b36","#5e4728"],SUBJECTS:{math:"Mathe",german:"Deutsch",english_listen:"Englisch (Hören)",english_read:"Englisch (Lesen)"}}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var a=r(6),i=n(a),o=r(3),l=n(o);r(7),(0,i.default)(),(0,l.default)()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1);e.default=function(){var t="./data/schulformen.csv",e="multi-bars",r=d3.select("#"+e);d3.csv(t,function(t){var a=["Gymnasium","Hauptschule","Realschule","Schulen des längeren gemeinsamen Lernens"],i=Object.keys(n.SUBJECTS).map(function(t){return n.SUBJECTS[t]});i.splice(0,0,null);var o=function(e){var r=t.filter(function(t){return t.schulform==e});return i.map(function(t){return t?r.find(function(e){return e.fach==t}):t})},l=function(t){var e=Object.keys(t).filter(function(t){return t.indexOf("niveau")>-1&&t.indexOf("6")<0}).sort().reverse();return e.map(function(e){return{y:e,x:t[e]}})};r.append("div").attr("class",e+"__row "+e+"__row--header").selectAll("div").data(i).enter().append("div").attr("class",e+"__cell").classed(e+"__cell--empty",function(t){return!t}).text(function(t){return t}),r.append("div").selectAll("div").data(a).enter().append("div").attr("class",e+"__row "+e+"__row--section").html(function(t){return"<h3>"+t+"</h3>"}).append("div").selectAll("div").data(function(t){return o(t)}).enter().append("div").attr("class",e+"__cell").classed(e+"__cell--chart",function(t){return t}).classed(e+"__cell--empty",function(t){return!t}).append("div").attr("id",function(t){return t&&t.chart_id}),t.map(function(t){d3.playbooks.horizontalBarChart({elementId:t.chart_id,data:l(t),color:function(t){return t.y.indexOf("0")<0&&t.y.indexOf("1")<0?n.COLORS[0]:n.COLORS[3]},barMargin:10,margin:{top:0,right:0,bottom:0,left:0},showXAxis:!1,showYAxis:!1,getXDomain:function(){return[0,75]},responsiveSvg:!0}).render()})})}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(5),i=n(a),o=riot.observable();o.on(riot.EVT.mouseover,function(t){var e=t.sender,r=t.data,n=riot.STORE.maps;Object.keys(n).filter(function(t){return t!==e}).map(function(t){var e=n[t];e.hilight(r.RS)}),e!==riot.STORE.master&&(n[riot.STORE.master].control().trigger(riot.EVT.updateInfobox,r),n[riot.STORE.master].control().trigger(riot.EVT.updateSelector,r))}),e.default=function(t){Object.keys(t).map(function(e){var r=t[e].control();r.on(riot.EVT.mouseover,function(t){var r=t.data;riot.STORE.activeMap=e,o.trigger(riot.EVT.mouseover,{sender:e,data:r})}),e===riot.STORE.master&&(r.on(riot.EVT.selectorSelect,function(t){o.trigger(riot.EVT.mouseover,{sender:e,data:t})}),r.on(riot.EVT.updateInfobox,function(t){setTimeout(function(){return(0,i.default)(t)},10)}))})}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),a=d3.select("#multi-maps-small-bars").append("div").attr("class","multi-map__bars-wrapper").append("div").attr("class","multi-map__bar-chart").classed("--hidden",!0).attr("id","multi-map__bar-chart");a.append("h4").attr("class","multi-map__bar-chart-title"),a.append("p").attr("class","annotation--small").html('Verteilung auf die Niveaustufen.<br>"-" = keine Niveaustufe erreicht.');var i=function(t,e){return t.indexOf("_rel")>-1&&t.indexOf(e)>-1&&t.indexOf("risiko")<0},o=function(t){return Object.keys(t).filter(function(t){return i(t,riot.STORE.activeMap)}).sort().reverse().map(function(e,r){var n=5-r;return{y:n?n:"-",x:t[e]}})};e.default=function(t){a.classed("--hidden",!1),a.selectAll("div").remove(),a.select("h4").text("Ergebnisse für "+n.SUBJECTS[riot.STORE.activeMap]),d3.playbooks.horizontalBarChart({width:300,height:150,color:function(t){return t.y>1?n.COLORS[0]:"#c81455"},elementId:"multi-map__bar-chart",data:o(t),barMargin:5,margin:{top:0,right:0,left:20,bottom:0},showXAxis:!1,showYLabel:!1,getXDomain:function(){return[0,70]},drawExtra:function(t){var e=t.yScale.bandwidth();t.g.append("g").attr("class","bar-labels").selectAll("text").data(t.data).enter().append("text").attr("y",function(r){return t.yScale(r.y)+e/2}).attr("x",function(e){return t.xScale(70)}).attr("text-anchor","end").attr("dominant-baseline","middle").text(function(t){return t.x+" %"})}}).render()}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),i=r(4),o=n(i);e.default=function(){var t="./data/data.csv",e="./data/rvr_districts.topo.json",r="multi-maps",n="multi-map",i=846,l=480,s=[0,35],c="risiko_rel";d3.json(e,function(e){var u=topojson.feature(e,e.objects.rvr_districts);d3.csv(t,function(t){d3.playbooks.choroplethMap.defaults({color:a.COLORS,nullColor:"#ededed",cssNamespace:n,height:l,width:i,data:t,geoData:u,yExtent:s,getId:function(t){return t.properties.RS},responsiveSvg:!0});var e={};riot.STORE={activeMap:"math"};var d=d3.select("#"+r);Object.keys(a.SUBJECTS).map(function(t,n){var i=r+"--"+t,o=d.append("div").attr("id",i).attr("class","multi-map__container");o.append("h4").attr("class","multi-map__title").text(a.SUBJECTS[t]),e[t]=d3.playbooks.choroplethMap({elementId:i,yCol:t+"__"+c}).render(),n||(riot.STORE.master=t,e[t].infobox({element:"#multi-maps-infobox",template:'\n              <h4 class="cor-viz-ls__infobox-title">Anteil der Risikoschüler</h4>\n              <table class="multi-map__table">\n                <tr class="multi-map__table-row multi-map__table-row--header">\n                  <td>{math__risiko_rel}&nbsp;%</td>\n                  <td>{german__risiko_rel}&nbsp;%</td>\n                  <td>{english_listen__risiko_rel}&nbsp;%</td>\n                  <td>{english_read__risiko_rel}&nbsp;%</td>\n                </tr>\n                <tr class="multi-map__table-row">\n                  <td>Mathe</td>\n                  <td>Deutsch</td>\n                  <td>Englisch (Hören)</td>\n                  <td>Englisch (Lesen)</td>\n                </tr>\n              </table>\n              <p class="data--small">Schüler: {participating}</p>\n            '}).legend({wrapperTemplate:'\n                <h4 class="multi-map__legend-title">Anteil in %</h4>\n                <div class="multi-map__legend-items">\n                  {body}\n                </div>',itemTemplate:'<span class="multi-map__legend-item" style="background-color:{color};">{label}</span>',element:"#multi-maps-legend"}).selector({element:"#multi-maps-selector",getLabel:function(t){return t.GEN}}))}),riot.STORE.maps=e,(0,o.default)(e)})})}},function(t,e){}]);
//# sourceMappingURL=bundle.js.map