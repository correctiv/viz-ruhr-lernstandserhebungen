!function(t){function e(a){if(n[a])return n[a].exports;var r=n[a]={exports:{},id:a,loaded:!1};return t[a].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports=n(2)},function(t,e){"use strict";t.exports={COLORS:["#f9c280","#dfad71","#c59962","#ab8454","#917045","#775b36","#5e4728"],SUBJECTS:{math:"Mathe",german:"Deutsch",english_listen:"Englisch (Hören)",english_read:"Englisch (Lesen)"}}},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}var r=n(6),i=a(r),l=n(3),s=a(l);n(8),(0,i.default)(),(0,s.default)()},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(7),l=a(i);e.default=function(){var t="./data/schulformen.csv",e="multi-bars",n=d3.select("#"+e);d3.csv(t,function(t){var a=["Gymnasium","Hauptschule","Realschule","Schulen des längeren gemeinsamen Lernens"],i=["kein Niveau","Niveaustufe&nbsp;1","Niveaustuf&nbsp;2","Niveaustufe&nbsp;3","Niveaustufe&nbsp;4","Niveaustufe&nbsp;5"],s=Object.keys(r.SUBJECTS).map(function(t){return r.SUBJECTS[t]});s.splice(0,0,null);var o=function(e){var n=t.filter(function(t){return t.schulform==e});return s.map(function(t){return n.find(function(e){return e.fach==t})})},u=function(t){return Object.keys(t).filter(function(t){return t.indexOf("niveau")>-1&&t.indexOf("6")<0}).sort().map(function(e,n){return{x:n||"-",y:t[e]}})},c=n.append("div").selectAll("div").data(a).enter().append("div").attr("class",e+"__row "+e+"__row--section").html(function(t){return"<h3>"+t+"</h3>"});c.append("span").attr("class","annotation--smaller --mobile-only").text('Verteilung auf die Niveaustufen. "-" = keine Niveaustufe erreicht.'),c.call(function(t){s.map(function(n){n?t.selectAll("div").data(function(t){return o(t)}).enter().append("div").attr("class",e+"__cell "+e+"__cell--chart").append("div").attr("id",function(t){return t&&t.chart_id}).append("span").attr("class","chart-title").text(function(t){return t.fach}):t.append("div").attr("class",e+"__cell "+e+"__cell--labels").selectAll("span").data(i).enter().append("span").attr("class",e+"__label").html(function(t){return t})})}),t.map(function(t){d3.select("#"+t.chart_id).call(function(e){(0,l.default)(e,u(t))}).selectAll("div.divbars__bar").append("span").attr("class","multi-bars__mobile-labels --mobile-only").text(function(t){return t.x})})})}},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),i=a(r),l=riot.observable();l.on(riot.EVT.mouseover,function(t){var e=t.sender,n=t.data,a=riot.STORE.maps;Object.keys(a).filter(function(t){return t!==e}).map(function(t){var e=a[t];e.hilight(n.RS)}),e!==riot.STORE.master&&(a[riot.STORE.master].control().trigger(riot.EVT.updateInfobox,n),a[riot.STORE.master].control().trigger(riot.EVT.updateSelector,n))}),e.default=function(t){Object.keys(t).map(function(e){var n=t[e].control();n.on(riot.EVT.mouseover,function(t){var n=t.data;riot.STORE.activeMap=e,l.trigger(riot.EVT.mouseover,{sender:e,data:n})}),e===riot.STORE.master&&(n.on(riot.EVT.selectorSelect,function(t){l.trigger(riot.EVT.mouseover,{sender:e,data:t})}),n.on(riot.EVT.updateInfobox,function(t){setTimeout(function(){return(0,i.default)(t)},10)}))})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),r=d3.select("#multi-maps-small-bars").append("div").attr("class","multi-map__bars-wrapper").append("div").attr("class","multi-map__bar-chart").classed("--hidden",!0).attr("id","multi-map__bar-chart");r.append("h4").attr("class","multi-map__bar-chart-title"),r.append("p").attr("class","annotation--small").html('Verteilung auf die Niveaustufen.<br>"-" = keine Niveaustufe erreicht.');var i=function(t,e){return t.indexOf("_rel")>-1&&t.indexOf(e)>-1&&t.indexOf("risiko")<0},l=function(t){return Object.keys(t).filter(function(t){return i(t,riot.STORE.activeMap)}).sort().reverse().map(function(e,n){var a=5-n;return{y:a?a:"-",x:t[e]}})};e.default=function(t){r.classed("--hidden",!1),r.selectAll("div").remove(),r.select("h4").text("Ergebnisse für "+a.SUBJECTS[riot.STORE.activeMap]),d3.playbooks.horizontalBarChart({width:300,height:150,color:function(t){return t.y>1?a.COLORS[0]:"#c81455"},elementId:"multi-map__bar-chart",data:l(t),barMargin:5,margin:{top:0,right:0,left:20,bottom:0},showXAxis:!1,showYLabel:!1,getXDomain:function(){return[0,70]},drawExtra:function(t){var e=t.yScale.bandwidth();t.g.append("g").attr("class","bar-labels").selectAll("text").data(t.data).enter().append("text").attr("y",function(n){return t.yScale(n.y)+e/2}).attr("x",function(e){return t.xScale(70)}).attr("text-anchor","end").attr("dominant-baseline","middle").text(function(t){return t.x+" %"})}}).render()}},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(4),l=a(i);e.default=function(){var t="./data/data.csv",e="./data/nrw_districts_excerpt_fixed.topo.json",n="multi-maps",a="multi-map",i=800,s=600,o=[0,35],u="risiko_rel";d3.json(e,function(e){var c=topojson.feature(e,e.objects.nrw_districts_fixed);d3.csv(t,function(t){d3.playbooks.choroplethMap.defaults({color:r.COLORS,nullColor:"#ededed",cssNamespace:a,height:s,width:i,data:t,geoData:c,yExtent:o,getId:function(t){return t.properties.RS},responsiveSvg:!0});var e={};riot.STORE={activeMap:"math"};var d=d3.select("#"+n);Object.keys(r.SUBJECTS).map(function(t,a){var i=n+"--"+t,l=d.append("div").attr("id",i).attr("class","multi-map__container");l.append("h4").attr("class","multi-map__title").text(r.SUBJECTS[t]),e[t]=d3.playbooks.choroplethMap({elementId:i,yCol:t+"__"+u}).render(),a||(riot.STORE.master=t,e[t].infobox({element:"#multi-maps-infobox",template:'\n              <h4 class="cor-viz-ls__infobox-title">Anteil der Risikoschüler</h4>\n              <table class="multi-map__table">\n                <tr class="multi-map__table-row multi-map__table-row--header">\n                  <td>{math__risiko_rel}&nbsp;%</td>\n                  <td>{german__risiko_rel}&nbsp;%</td>\n                  <td>{english_listen__risiko_rel}&nbsp;%</td>\n                  <td>{english_read__risiko_rel}&nbsp;%</td>\n                </tr>\n                <tr class="multi-map__table-row">\n                  <td>Mathe</td>\n                  <td>Deutsch</td>\n                  <td>Englisch (Hören)</td>\n                  <td>Englisch (Lesen)</td>\n                </tr>\n              </table>\n              <p class="data--small">Achtklässler, die in <strong>{GEN}</strong> an der Lernstandserhebung teilgenommen haben: <strong>{participating}</strong></p>\n            '}).legend({wrapperTemplate:'\n                <h4 class="multi-map__legend-title">Anteil in %</h4>\n                <div class="multi-map__legend-items">\n                  {body}\n                </div>',itemTemplate:'<span class="multi-map__legend-item" style="background-color:{color};">{label}</span>',element:"#multi-maps-legend"}).selector({element:"#multi-maps-selector",getLabel:function(t){return t.GEN}}))}),riot.STORE.maps=e,(0,l.default)(e)})})}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){t.selectAll("div").data(e).enter().append("div").attr("class","divbars__bar-outer").append("div").attr("class","divbars__bar").classed("divbars__bar--hilight",function(t){return!(t.x>1)}).style("width",function(t){return 1.3*t.y+"%"}).append("span").attr("class","divbars__bar-label").text(function(t){return Math.round(t.y)+" %"})}},function(t,e){}]);
//# sourceMappingURL=bundle.js.map